<div class="py-4 px-10 lg:px-0" id="running-block">
  <div class="flex items-center gap-x-3">
    <h3 class="flex-auto text-lg font-semibold leading-6 text-white">
      {{ running.name }}
    </h3>
    <time _="
              init repeat forever
                call format(@x-start-time) then put it into my.innerHTML
                wait 20s
              end
            " datetime="{{ running.duration_iso }}" x-start-time="{{ running.start_time }}"
      class="flex-none text-sm text-gray-500">
      {{ running.duration }}
    </time>

    <div class="relative inline-block text-left">
      <button type="button"
        class="flex items-center rounded-full text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500"
        aria-expanded="true" aria-haspopup="true" _="on click toggle .hidden on the next <div[role=menu]/>">
        <span class="sr-only">Open options</span>
        <svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
          <path
            d="M10 3a1.5 1.5 0 110 3 1.5 1.5 0 010-3zM10 8.5a1.5 1.5 0 110 3 1.5 1.5 0 010-3zM11.5 15.5a1.5 1.5 0 10-3 0 1.5 1.5 0 003 0z" />
        </svg>
      </button>

      <div
        class="absolute right-0 bottom-12 z-10 mt-2 w-28 origin-bottom-right rounded-md bg-gray-700 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none hidden"
        role="menu" aria-orientation="vertical" aria-labelledby="menu-button" tabindex="-1">
        <div class="py-2" role="none">
          <button hx-post="/app/activity/{{ running.id }}/stop?date={{ curr }}" hx-select="main" hx-target="main"
            hx-swap="outerHTML" type="button"
            class="text-white w-full text-left px-4 py-2 text-sm hover:bg-gray-100 hover:text-gray-900" role="menuitem"
            tabindex="-1" id="menu-item-0">
            Stop
          </button>
          <a href="/app/activity/{{ running.id }}?date={{ curr }}"
            class="text-white block text-left px-4 py-2 text-sm hover:bg-gray-100 hover:text-gray-900" role="menuitem"
            tabindex="-1" id="menu-item-1">
            Edit
          </a>
          <button hx-delete="/app/activity/{{ running.id }}?date={{ curr }}" id="running-del-btn" hx-select="main"
            hx-target="main" hx-swap="outerHTML" hx-trigger="confirmed" onClick="Swal.fire({
                       title: 'Confirm', 
                       text: 'Do you really want to continue?', 
                       icon: 'warning', 
                       showCancelButton: true, 
                       focusCancel: true,
                     })
                     .then(function(result){
                       if(result.isConfirmed) {
                         htmx.trigger('#running-del-btn', 'confirmed' );
                       }
                     })" class="text-white w-full text-left px-4 py-2 text-sm hover:bg-gray-100 hover:text-gray-900"
            role="menuitem" tabindex="-1" id="menu-item-2">
            Delete
          </button>
        </div>
      </div>
    </div>
  </div>
  <div class="mt-3 truncate text-sm text-gray-500">
    {% for tag in running.tags %}
    <span
      class="inline-flex items-center rounded-md bg-gray-400/10 px-2 py-1 text-xs font-medium text-gray-400 ring-1 ring-inset ring-gray-400/20">
      {{ tag.name }}
    </span>
    {% endfor %}
  </div>
</div>
